# Main Hydra configuration for LDC solvers
#
# Usage:
#   uv run python main.py -m +experiment/validation/ghia=fv      # solve + plot
#   uv run python main.py -m +experiment/validation/ghia=fv plot_only=true  # plot only
#   uv run python main.py solver=fv N=32 Re=100                  # single run

defaults:
  - problem: ldc
  - solver: fv
  - validation: fv
  - mlflow: local
  - machine: local
  - _self_

# Grid size
N: 32

# Solver control
tolerance: 1.0e-6
max_iterations: 1000000

# Experiment naming
experiment_name: LDC-Dev
sweep_name: dev-run

# Plot-only mode (skip solving, regenerate plots from existing runs)
plot_only: false

# =============================================================================
# Hydra output paths and callbacks
# =============================================================================
hydra:
  mode: MULTIRUN
  run:
    dir: hydra_outputs/runs/${now:%d-%m-%y}/${now:%H:%M:%S}
  sweep:
    dir: hydra_outputs/multirun/${now:%d-%m-%y}/${now:%H:%M:%S}
    subdir: ${hydra.job.num}
  callbacks:
    mlflow_sweep:
      _target_: utilities.mlflow.callback.MLflowSweepCallback
